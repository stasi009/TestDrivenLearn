package test

import org.scalatest.Spec

sealed class CallByNameTest extends Spec {

  object `call by name` {

    def `contrast - call by value` = {

      var external = 0 // simulate external environment
      // simulate a process which has side-effect and cost time
      def fool(a: Int) = { external += 1; a }

      def callbyvalue(enabled: Boolean, b: Int) = if (enabled) b * b else -1

      for (index <- 1 to 5) {
        assertResult(-1) { callbyvalue(false, fool(index)) }
      }
      // even result of fool is not used, it still cause side-effect
      assert(external == 5)

    } //def

  } //object

}