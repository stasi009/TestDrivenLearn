package test

import org.scalatest.Spec

/*
 * view and stream are both lazy-evaluated data structures
 * the difference between them:
 * 1. view are always lazy-evaluated for all its elements. however, stream is active for its head, but lazy for its tail part
 * 2. stream cache all its previous-accessed elements. while, view has no memory, always re-generate
 */
sealed class LazyViewTest extends Spec {
  
  object `demo how view works` {
    
    def `view has no cache` = {
      
      var sideeffect = 0
      def mimicExpensiveOperation(x:Int) = {
        sideeffect += 1 // mimic a heavy computation to get a result
        x * 2
      }
      
      val originalCollection = 1 to 10
      val resultView = (originalCollection.view) map mimicExpensiveOperation
      assertResult(0)(sideeffect)
      
      assertResult(2)(resultView(0))
    }//def
    
    
  }//object

}