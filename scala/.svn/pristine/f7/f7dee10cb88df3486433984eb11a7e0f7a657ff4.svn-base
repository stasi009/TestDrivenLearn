
package test

import org.scalatest.Spec
import org.scalatest.BeforeAndAfter
import collection.mutable.ListBuffer

class ExampleTestSpec extends Spec with BeforeAndAfter {

  object `When Empty` {
    def `should have size 0` {
      assert(Set.empty.size === 0)
    }

    def `should produce NoSuchElementException when head is invoked` {
      intercept[NoSuchElementException] {
        Set.empty.head
      }
    }

  } // object WhenEmpty

  object `Demo Before After` {

    val builder = new StringBuilder
    val buffer = new ListBuffer[String]

    before {
      builder.append("ScalaTest is ")
    }

    after {
      builder.clear()
      buffer.clear()
    }

    def `should be easy` {
      builder.append("easy!")
      assert(builder.toString === "ScalaTest is easy!")
      assert(buffer.isEmpty)
      buffer += "sweet"
    }

    def `should be fun` {
      builder.append("fun!")
      assert(builder.toString === "ScalaTest is fun!")
      // changes in shared state in one method won't affect another method
      assert(buffer.isEmpty)
    }
  } // demo before and after
}