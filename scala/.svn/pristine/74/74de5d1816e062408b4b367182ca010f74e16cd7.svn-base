package test

import org.scalatest.Spec

sealed class ExtractorTest extends Spec {

  object Name {
    def apply(firstname: String, lastname: String) = s"$firstname $lastname"

    def unapply(fullname: String) = {
      val segments = fullname split " "
      if (segments.length == 2) Some(segments(0), segments(1))
      else None
    }
  }

  def `injection method` = {
    // ------------- inject
    val firstname = "stasi"
    val lastname = "kgb"
    val fullname = Name(firstname, lastname)

    // ------------- extract
    val Name(cpyfirst, cpylast) = fullname
    assert(cpyfirst == firstname)
    assert(cpylast == lastname)
  }

  def `demo 1` = {
    val Name(firstname, lastname) = "stasi cheka"
    assert(firstname == "stasi")
    assert(lastname == "cheka")

    intercept[MatchError] { val Name(_, _) = "stasi" }
  }

}