package test

import org.scalatest.Spec

sealed class ArrayTest extends Spec {
  
  object `basic operations` {
    
    def `initialize arrays` = {
      // use constructor, primitive type are initialized to be zero
      val intarray = new Array[Int](10)
      assertResult(10)(intarray.length)
      assert(intarray forall {_ == 0})
      
      // use constructor, reference type are initialized to be null
      val strarray = new Array[String](11)
      assertResult(11)(strarray.length)
      assert(strarray forall {_ == null})
      
      // use companion object's apply method
      val txts = Array("stasi","kgb")
      assertResult(2)(txts.length)
      assertResult("stasi")(txts(0))
      assertResult("kgb")(txts(1))
    }
    
    def `array is mutable` = {
      val original = Array(1,2,3)
      val reference = original
      
      // change in place
      reference(1) = 200
      assertResult(200)(original(2))
      assert(original sameElements Array(1,200,3))
    }
    
  }
  
  object `array equality` {
    
    // since Array still uses the default "equals"
    // so "==" still checks on "reference equality"
    // test whether two names points to the same object or not
    def `default ==` = {
      val original = Array(1,2,3)
      val sameRef = original
      val sameContent = Array(1,2,3)
      
      assert(original == sameRef)
      assert(original != sameContent)
    }
    
    def `eq and equals` = {
      val original = Array(1,2,3)
      val sameRef = original
      val sameContent = Array(1,2,3)
      
      assert(original eq sameRef)
      assert(original equals sameRef)
      assert(! (original equals sameContent ))
    }
    
    def `check sameElements` = {
      val original = Array(1,2,3)
      val sameElem_sameOrder = Array(1,2,3)
      val sameElem_diffOrder = Array(3,2,1)
      
      // not the same object
      assert(original != sameElem_sameOrder)
      // true, when same elements in same order
      assert(original sameElements sameElem_sameOrder)
      // false, when same elements but different order
      assert(!(original sameElements sameElem_diffOrder))
    }
  }// equality check on array

}